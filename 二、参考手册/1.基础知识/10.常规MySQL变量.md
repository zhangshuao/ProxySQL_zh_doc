# 常规MySQL变量

## MySQL变量列表

    注意：您可以单击变量名跳转到其定义

    Variable name	                                    Default Value
    mysql-add_ldap_user_comment
    mysql-auditlog_filename
    mysql-auditlog_filesize	                            100MB
    mysql-auto_increment_delay_multiplex	            5
    mysql-autocommit_false_is_transaction	            false
    mysql-autocommit_false_not_reusable	                false
    mysql-binlog_reader_connect_retry_msec	            3000
    mysql-client_host_cache_size	                    0
    mysql-client_host_error_counts	                    0
    mysql-client_found_rows	                            true
    mysql-client_multi_statements	                    true
    mysql-client_session_track_gtid	                    true
    mysql-commands_stats	                            true
    mysql-connect_retries_delay                         1
    mysql-connect_retries_on_failure	                10
    mysql-connect_timeout_server	                    3000
    mysql-connect_timeout_server_max	                10000
    mysql-connection_delay_multiplex_ms	                0
    mysql-connection_max_age_ms	                        0
    mysql-connpoll_reset_queue_length	                50
    mysql-default_character_set_results	                NULL
    mysql-default_charset	                            utf8
    mysql-default_collation_connection
    mysql-default_isolation_level	                    READ COMMITTED
    mysql-default_max_join_size	                        18446744073709551615
    mysql-default_max_latency_ms	                    1000
    mysql-default_net_write_timeout	                    60
    mysql-default_query_delay	                        0
    mysql-default_query_timeout	                        36000000
    mysql-default_reconnect	                            true
    mysql-default_schema	                            information_schema
    mysql-default_session_track_gtids	                OFF
    mysql-default_sql_auto_is_null	                    OFF
    mysql-default_sql_mode
    mysql-default_sql_safe_updates	                    OFF
    mysql-default_sql_select_limit	                    DEFAULT
    mysql-default_time_zone	                            SYSTEM
    mysql-default_transaction_read	                    WRITE
    mysql-default_tx_isolation	                        READ-COMMITTED
    mysql-enforce_autocommit_on_reads	                false
    mysql-eventslog_default_log	                        0
    mysql-eventslog_filename
    mysql-eventslog_filesize	                        104857600
    mysql-eventslog_format	                            1
    mysql-forward_autocommit	                        false
    mysql-free_connections_pct	                        10
    mysql-have_compress	                                true
    mysql-have_ssl	                                    false
    mysql-hostgroup_manager_verbose	                    1
    mysql-init_connect
    mysql-interfaces	                                0.0.0.0:6033
    mysql-keep_multiplexing_variables	                tx_isolation,version
    mysql-kill_backend_connection_when_disconnect	    true
    mysql-ldap_user_variable
    mysql-log_mysql_warnings_enabled	                false
    mysql-log_unhealthy_connections	                    true
    mysql-long_query_time	                            1000
    mysql-max_allowed_packet	                        4194304
    mysql-max_connections	                            2048
    mysql-max_stmts_cache	                            10000
    mysql-max_stmts_per_connection	                    20
    mysql-max_transaction_time	                        14400000
    mysql-min_num_servers_lantency_awareness	        1000
    mysql-mirror_max_concurrency	                    16
    mysql-mirror_max_queue_length	                    32000
    mysql-multiplexing	                                true
    mysql-ping_interval_server_msec	                    120000
    mysql-ping_timeout_server	                        500
    mysql-poll_timeout	                                2000
    mysql-poll_timeout_on_failure	                    100
    mysql-query_cache_size_MB	                        256
    mysql-query_cache_stores_empty_result	            true
    mysql-query_digests	                                true
    mysql-query_digests_grouping_limit	                3
    mysql-query_digests_lowercase	                    false
    mysql-query_digests_max_digest_length	            2048
    mysql-query_digests_max_query_length	            65000
    mysql-query_digests_no_digits	                    false
    mysql-query_digests_normalize_digest_text	        false
    mysql-query_digests_replace_null	                false
    mysql-query_digests_track_hostname	                false
    mysql-query_processor_iterations	                0
    mysql-query_processor_regex	                        1
    mysql-query_retries_on_failure	                    1
    mysql-reset_connection_algorithm	                2
    mysql-server_capabilities	                        569867
    mysql-server_version	                            5.5.30
    mysql-servers_stats	                                true
    mysql-session_idle_ms	                            1000
    mysql-session_idle_show_processlist	                true
    mysql-sessions_sort	                                true
    mysql-set_query_lock_on_hostgroup	                1
    mysql-show_processlist_extended	                    0
    mysql-shun_on_failures	                            5
    mysql-shun_recovery_time_sec	                    10
    mysql-ssl_p2s_ca
    mysql-ssl_p2s_capath
    mysql-ssl_p2s_cert
    mysql-ssl_p2s_cipher
    mysql-ssl_p2s_key
    mysql-ssl_p2s_crl
    mysql-ssl_p2s_crlpath
    mysql-stacksize	                                    1048576
    mysql-stats_time_backend_query	                    false
    mysql-stats_time_query_processor	                false
    mysql-tcp_keepalive_time	                        0
    mysql-threads	                                    4
    mysql-threshold_query_length	                    524288
    mysql-threshold_resultset_size	                    4194304
    mysql-throttle_connections_per_sec_to_hostgroup	    1000000
    mysql-throttle_max_bytes_per_second_to_client	    0
    mysql-throttle_ratio_server_to_client	            0
    mysql-use_tcp_keepalive	                            0
    mysql-verbose_query_error	                        false
    mysql-wait_timeout	                                28800000

### mysql-add_ldap_user_comment

    MySQL Variable	    Name	        mysql-add_ldap_user_comment
                        Dynamic	        Yes
    Permitted Values	Type	        String
                        Default	        NULL
                        Valid values

    如果设置了mysql-add_ldap_user_comment，则会在查询中添加如下注释：
    valueof_mysql-add_ldap_user_comment=frontend_username

### mysql-ldap_user_variable

    MySQL Variable	    Name	        mysql-ldap_user_variable
                        Dynamic	        Yes
    Permitted Values	Type	        String
                        Default	        NULL
                        Valid values

    设置时，会话将有一个带有user_name值的变量集，即：set@mysql-ldap_user_variable:='username'
    此变量可用于审计目的的后端。例如，如果表上的触发器将使用该会话变量。

### mysql-auditlog_filename

    MySQL Variable	    Name	        mysql-auditlog_filename
                        Dynamic	        Yes
    Permitted Values	Type	        String
                        Default	        NULL
                        Valid values

    设置此变量将自动启用审核日志（https://proxysql.com/documentation/audit-log/）。此变量定义记录审核事件的审核日志的基本名称。
    日志文件的文件名将是基本名称，后跟8位递增数字。根据mysql-auditlog_filesize的值自动旋转文件（https://proxysql.com/documentation/global-variables/mysql-variables/#mysql-auditlog_filesize）。

### mysql-auditlog_filesize

    System Variable	    Name	    mysql-auditlog_filesize
                        Dynamic	    Yes
    Permitted Values	Type	    Integer (count)
                        Default	    104857600
                        Minimum	    1MB
                        Maximum	    1GB

    此变量定义关闭当前文件并创建新文件时审核日志文件的最大文件大小（请参阅mysql-auditlog_filename(https://proxysql.com/documentation/global-variables/mysql-variables/#mysql-auditlog_filename)）。
    默认值为104857600（100MB）

### mysql-auto_increment_delay_multiplex

    System Variable	    Name	    mysql-auto_increment_delay_multiplex
                        Dynamic	    Yes
    Permitted Values	Type	    Integer (count)
                        Default	    5
                        Minimum	    0
                        Maximum	    1000000

    一些应用程序显式或隐式地依赖于LAST_INSERT_ID()返回的值。如果多路复用配置不正确，或者如果查询模式确实不可预测（例如，如果经常部署新查询），则使用LAST_INSERT_ID()的查询可能使用与使用自动增量的连接不同的连接。

    如果设置了mysql-auto_increment_delay_multiplex，则在收到带有last_insert_id的OK数据包后，对于mysql-auto_increment_delay_multiplex中指定的相同数量的查询，将临时禁用多路复用。

    请注意，禁用多路复用不会禁用路由，因此正确配置读/写拆分非常重要。

    此外，请注意，即使mysql-auto_increment_delay_multiplex设置为0，ProxySQL也能够正确处理这些查询：

        * SELECT LAST_INSERT_ID()
        * SELECT LAST_INSERT_ID() LIMIT 1
        * SELECT @@IDENTITY

    因此，只有当应用程序以某种方式依赖于LAST_INSERT_ID()而不是上面列出的查询时，才应该将mysql-auto_increment_delay_multiplex配置为大于0。

    顾名思义，mysql-auto_increment_delay_multiplex多路复用(https://proxysql.com/documentation/multiplexing/)：ProxySQL最重要和最高级的功能之一。
    如果应用程序不使用LAST_INSERT_ID()，建议将mysql-auto_increment_delay_multiplex降低到0。

### mysql-autocommit_false_is_transaction

    System Variable	        Name	    mysql-autocommit_false_is_transaction
                            Dynamic	    Yes
    Permitted Values	    Type	    Boolean
                            Default	    false

    如果mysql-autocommit_false_is_transaction=true（默认为false），则autocommit=0的连接将被视为事务，并且不会返回到连接池。
    也就是说，autocommit=0将禁用多路复用。
    请注意，autocommit=0不足以启动事务：在数据库级别，当对事务表执行查询时，事务将启动。

    建议不要更改此变量。

### mysql-autocommit_false_not_reusable

    System Variable	        Name	    mysql-autocommit_false_not_reusable
                            Dynamic	    Yes
    Permitted Values	    Type	    Boolean
                            Default	    false

    当设置为true时，autocommit=0的连接不会被重新使用，并且在连接返回到连接池时会被销毁。
    建议不要更改此变量。

### mysql-binlog_reader_connect_retry_msec

    控制binlog reader（在ProxySQL 2.0中引入）的连接重试超时。

    System Variable	        Name	    mysql-binlog_reader_connect_retry_msec
                            Dynamic	    Yes
    Permitted Values	    Type	    Integer (milliseconds)
                            Default	    3000
                            Minimum	    200
                            Maximum	    120000

### mysql-client_found_rows

    System Variable	        Name	    mysql-client_found_rows
                            Dynamic	    Yes
    Permitted Values	    Type	    Boolean
                            Default	    true

    自2.0.6以来，此变量已弃用。
    对于旧版本：当设置为true时，在连接到MySQL后端时设置客户端标志CLIENT_FOUND_ROWS。
    自ProxySQL版本2.0.6以来，ProxySQL将匹配前端和后端连接中的标志CLIENT_FOUND_ROWS。

### mysql-client_host_cache_size

    System Variable	        Name	    mysql-client_host_cache_size
                            Dynamic	    Yes
    Permitted Values	    Type	    Integer
                            Default	    0
                            Minimum	    0
                            Maximum	    1048576

    与mysql-client_host_error_counts相结合（https://proxysql.com/documentation/global-variables/mysql-variables/#mysql-client_host_error_counts），提供了对客户端错误限制功能的控制。
    此变量指定用于存储以前执行过无效连接尝试的客户端地址的缓存的最大大小。

### mysql-client_host_error_counts

    System Variable	        Name	    mysql-client_host_error_counts
                            Dynamic	    Yes
    Permitted Values	    Type	    Integer
                            Default	    0
                            Minimum	    0
                            Maximum	    1048576

    与mysql-client_host_cache_size相结合，可以控制"Client Error Limit"功能。
    此变量指定在放弃任何进一步的连接尝试之前，可以从特定地址执行的连续不成功连接尝试的最大次数。

### mysql-client_multi_statements

    System Variable     	Name	    mysql-client_multi_statements
                            Dynamic	    Yes
    Permitted Values	    Type	    Boolean
                            Default	    true

    自2.0.6以来，此变量已弃用。
    对于旧版本：当设置为true时，在连接到MySQL后端时设置client flag CLIENT_MULTI_STATEMENTS。
    自ProxySQL版本2.0.6以来，ProxySQL在前端和后端连接中匹配标志CLIENT_MULTI_STATEMENTS。

### mysql-client_session_track_gtid

    System Variable	        Name	    mysql-client_session_track_gtid
                            Dynamic	    Yes
    Permitted Values	    Type	    Boolean
                            Default	    true

    激活时，ProxySQL将跟踪stats_mysql_gtid_executed表中后端服务的GTID状态。

### mysql-commands_stats

    System Variable	        Name	    mysql-commands_stats
                            Dynamic	    Yes
    Permitted Values	    Type	    Boolean
                            Default

    启用每个命令的MySQL查询统计信息。
    命令是正在执行的SQL查询的一种类型。例如：SELECT、INSERT或ALTER TABLE。
    查询表stats_mysql_commands_counters可以检索所有统计信息

### mysql-connect_retries_delay

    System Variable	        Name	    mysql-connect_retries_delay
                            Dynamic	    Yes
    Permitted Values	    Type	    Integer (milliseconds)
                            Default	    1
                            Minimum	    0
                            Maximum	    10000

    尝试重新连接后端MySQL服务器失败后，尝试重新连接之前的延迟（毫秒）。
    失败的尝试可能是由于多种原因造成的：后端太忙、当前尝试超时等。
    mysql-connect_retries_on_failure times将重试连接

### mysql-connect_retries_on_failure

    System Variable	        Name	    mysql-connect_retries_on_failure
                            Dynamic	    Yes
    Permitted Values	    Type	    Integer
                            Default	    10
                            Minimum	    0
                            Maximum	    1000

    在发生错误、超时或导致与后端MySQL服务器连接失败的任何其他事件时，应尝试重新连接的次数。
    尝试次数用完后，如果仍无法建立连接，则返回错误。返回的错误是最后一次连接尝试错误或一般错误（"到达主机组时最大连接失败"，错误代码28000）。

    另请参见mysql-connect重试延迟。

    请小心调整此参数 – 过高的值会显著增加向MySQL客户端报告无响应hostgroup的延迟。

### mysql-connect_timeout_server

    System Variable	        Name	    mysql-connect_timeout_server
                            Dynamic	    Yes
    Permitted Values	    Type	    Integer (milliseconds)
                            Default	    1000
                            Minimum	    10
                            Maximum	    120000

    尝试从proxysql连接到后端服务器的超时。如果失败，proxysql将根据参数mysql-connect_retries_on_failure和mysql-connect_retries_delay尝试重新连接。
    如果在mysql-connect_timeout_server_max毫秒之后无法访问目标主机组中的任何服务器，则会向客户端返回一个错误。

    有关更多详细信息，请参阅mysql-connect_timeout_server_max。

    我们认为默认值1000毫秒已经是一个很大的值：如果proxysql和后端在1000毫秒后无法完全建立连接，则可能是网络问题，或者后端过载，无法快速创建连接。
    因此，如果没有快速建立连接，这将是一个警告信号。

    尽管如此，一些用户还是喜欢将mysql-connect_timeout_server增加一点，允许建立到通常较慢的后端的连接。

### mysql-connect_timeout_server_max

    System Variable	        Name	    mysql-connect_timeout_server_max
                            Dynamic	    Yes
    Permitted Values	    Type	    Integer (milliseconds)
                            Default	    10000
                            Minimum	    10
                            Maximum	    3600000

    从proxysql连接到主机组中后端的最大超时。
    当proxysql尝试建立到后端的连接时，尝试可能会在mysql-connect_timeout_server毫秒后超时，proxysql将根据参数mysql-connect_retries_on_failure和mysql-connect_retries_delay重试建立新连接（针对同一后端或同一hostgroup中的另一后端）。
    当达到mysql-connect_timeout_server_max毫秒的最终超时时，将不再重试连接尝试，并向客户端返回一个错误，代码为9001，消息为"到达主机组时已达到最大连接超时…"。
    另请参见mysql-shun_recovery_time_sec

    由于版本2.0.7中修复了一个错误，对于所有以前的版本，建议不要将此值设置为大于10分钟。

### mysql-connection_delay_multiplex_ms

    System Variable	        Name	    mysql-connection_delay_multiplex_ms
                            Dynamic	    Yes
    Permitted Values	    Type	    Integer (milliseconds)
                            Default	    0
                            Minimum	    0
                            Maximum	    300000

    在后端连接上执行查询后，如果ProxySQL确定可以将同一后端连接安全地分配给另一个客户端（启用多路复用，或者换句话说，不需要将后端连接链接到特定的前端连接），后端连接将立即返回到连接池。

    变量mysql-connection_delay_multiplex_ms会修改此行为，它不会立即将后端连接返回到连接池，而是会在连接上短时间内禁用多路复用。

    这将允许前端连接重新使用相同的后端连接进行后续查询（例如，在批处理查询时）。在连接上没有活动时测量延迟。

    请注意，此变量临时仅禁用多路复用：查询路由它不受其影响。这一点很重要，因为如果应用程序运行的查询指向不同的目标hostgroup，它将不会使用相同的后端连接。

### mysql-connection_max_age_ms

    System Variable	        Name	    mysql-connection_max_age_ms
                            Dynamic	    Yes
    Permitted Values	    Type	    Integer (milliseconds)
                            Default	    0
                            Minimum	    0
                            Maximum	    86400000

    当mysql-connection_max_age_ms设置为大于0的值时，如果连接池中的非活动连接（因此当前未被任何会话使用）是在超过mysql-connection_max_age_ms毫秒前创建的，则会关闭这些连接。
    默认情况下，连接不会根据其age年龄关闭。
    当达到mysql-connection_max_age_ms时，只需断开连接，而不向服务器发送COM_QUIT命令，因此这可能会导致在mysql服务器日志中显示中止的连接警告（此行为的目的，请参阅"#1861"）。(https://proxysql.com/documentation/global-variables/mysql-variables/%22https://github.com/sysown/proxysql/issues/1861)

### mysql-connpoll_reset_queue_length

    System Variable	        Name	    mysql-connpoll_reset_queue_length
                            Dynamic	    Yes
    Permitted Values	    Type	    Integer
                            Default	    50
                            Minimum	    0
                            Maximum	    1000

    PoxySQL 1.4.0引入了一个后台线程（HGCU_thread_run()），负责在调用MySQL_HostGroups_Manager::destroy_MyConn_from_pool()时重置连接，而不是删除连接。
    在某些情况下，这种行为可能是无益的。在ProxySQL 1.4.4 mysql-connpoll_reset_queue_length中，当达到定义的阈值时，可以通过破坏连接来配置此行为。

### mysql-default_charset

    System Variable	        Name	        mysql-default_charset
                            Dynamic	        Yes
    Permitted Values	    Type	        String
                            Default	        utf8
                            Valid Values	Run "select * from mysql_collations;" in the Admin interface to view the full list

    与MySQL客户端通信时使用的默认服务器字符集。
    请注意，这是客户端连接的默认值，而不是后端连接的默认值。
    更具体地说，在与客户机握手期间，ProxySQL会将此作为其默认字符集发布。

    mysql-default_charset和mysql-default_collation_connection连接的值必须相互兼容。
    如果不是，ProxySQL将使用排序规则mysql-default_collation_connection的默认字符集配置mysql-default_charset。

    给定排序规则的默认字符集可以在表mysql_collations中找到。

### mysql-default_character_set_results

    版本2.0.11中已弃用。

### mysql-default_collation_connection

    System Variable	        Name	        mysql-default_collation_connection
                            Dynamic	        Yes
    Permitted Values	    Type	        String
                            Default	        NULL
                            Valid Values

    与MySQL客户端通信时使用的默认服务器排序规则。
    请注意，这是客户端连接的默认值，而不是后端连接的默认值。
    更具体地说，在与客户机握手期间，ProxySQL会将此作为其默认字符集发布。
    mysql-default_charset和mysql-default_collation_connection排序规则 连接的值必须相互兼容。
    如果不是，ProxySQL将使用排序规则mysql-default_collation_connection的字符集配置mysql-default_charset。

### mysql-default_isolation_level

    版本2.0.11中已弃用。

### mysql-default_max_join_size

    版本2.0.11中已弃用。

### mysql-default_max_latency_ms

    System Variable	        Name	        mysql-default_max_latency_ms
                            Dynamic	        Yes
    Permitted Values	    Type	        Integer (milliseconds)
                            Default	        1000
                            Minimum	        0
                            Maximum	        1728000000

    ProxySQL使用一种机制，在后端服务器的延迟过大时自动忽略它们。

    请注意，后端服务器没有被禁用，只是被忽略：换句话说，ProxySQL更喜欢延迟较小的主机。
    此功能对于提供基本的位置感知非常有用，在这种感知中，ProxySQL更喜欢距离较近的服务器，避免向距离较远或速度较慢的服务器发送流量。

    可以在mysql_servers的max_latency_ms列中配置每个后端的最大延迟。

    如果mysql_servers.max_latency_ms为0，则默认值mysql-default_max_latency_ms适用。

    注意：由于ProxySQL和后端都会执行额外的握手和身份验证，因此使用TLS建立连接更耗时，因此建议增加mysql-default_max_latency_ms，以考虑使用TLS建立连接的额外成本。

### mysql-default_net_write_timeout

    版本2.0.11中已弃用。

### mysql-default_query_delay

    System Variable	        Name	        mysql-default_query_delay
                            Dynamic	        Yes
    Permitted Values	    Type	        Integer (milliseconds)
                            Default	        0
                            Minimum	        0
                            Maximum	        3600000

    这个变量允许创建一个简单的节流机制，延迟后端查询的执行。将此变量设置为非零值（以毫秒为单位）将全局延迟所有查询的执行。

    在管理表mysql_query_rules中有一个更细粒度的节流机制，其中每个规则都可以有一个延迟，应用于与该规则匹配的所有查询。

    如果在mysql_query_rules.delay中指定了延迟，则忽略全局值mysql-default_query_delay。

    这个变量在紧急情况下非常有用，因为用户可以决定仅延迟每个查询的执行就从后端退出流量。

### mysql-default_query_timeout

    ProxySQL能够跟踪发送到后端的每个查询的执行时间，并且能够在此类查询运行时间过长时超时。

    有两种方法可以配置查询的超时（最大执行时间）:

    在表mysql_query_rules配置查询规则，列超时

    如果查询没有在mysql_query_rules.timeout中指定超时，则应用全局值mysql-default_query_timeout

    mysql-default_query_timeout的默认值为86400000毫秒，相当于24小时。

    当达到超时时，ProxySQL将生成一个单独的线程，该线程连接到后端并运行KILL查询，以停止查询在后端运行。
    之后，ProxySQL将向客户端返回一个错误。

    请注意，当ProxySQL由于超时而中断查询执行时，查询的重试机制将自动禁用，并且ProxySQL不会重试执行查询。

    System Variable	        Name	        mysql-default_query_timeout
                            Dynamic	        Yes
    Permitted Values	    Type	        Integer (milliseconds)
                            Default	        86400000
                            Minimum	        1000
                            Maximum	        1728000000

### mysql-default_reconnect

    现在不用了。

### mysql-default_schema

    System Variable	        Name	        mysql-default_schema
                            Dynamic	        Yes
    Permitted Values	    Type	        String
                            Default	        information_schema
                            Valid Values	Any existing schema

    用于未指定schema名称的传入MySQL客户端连接的默认schema。
    此变量是必需的，因为ProxySQL不允许没有架构的连接。
    请注意，与直接连接到MySQL服务器相比，这是一个重要的区别：MySQL允许在没有默认schema的情况下连接客户端，而ProxySQL不允许，因此它需要一个默认schema。

### mysql-default_session_track_gtids

    控制服务器是否跟踪当前会话中的GTID并将其返回给客户端。
    根据变量值，在执行每个事务结束时，跟踪器将捕获服务器GTID。
    如果需要，GTID值也会返回给客户端。

    System Variable	        Name	        mysql-default_session_track_gtids
                            Dynamic	        Yes
    Permitted Values	    Type
                            Default	        OFF
                            Valid Values	valid only at SESSION scopeOFF: The tracker collects no GTIDs. This is the default.OWN_GTID: The tracker collects GTIDs generated by successfully committed read/write transactions.ALL_GTIDS: Not supported in ProxySQL

### mysql-default_sql_auto_is_null

    版本2.0.11中已弃用。请参阅mysql-default_variables

    如果启用此变量，则在成功插入自动生成的自动增量值的语句后，可以通过发出以下形式的语句来查找该值：
    SELECT * FROM tbl_name WHERE auto_col IS NULL

    如果语句返回一行，则返回的值与调用上一个函数时的值相同。
    有关详细信息，包括多行插入后的返回值，请参见第12.15节"信息函数"。
    如果没有成功插入AUTO_INCREMENT，SELECT语句将不返回任何行

    System Variable	        Name	        mysql-default_sql_auto_is_null
                            Dynamic	        Yes
    Permitted Values	    Type	        String
                            Default	        OFF
                            Valid Values	ON|OFF

### mysql-default_sql_mode

    版本2.0.11中已弃用。请参阅mysql-default_variables

    当客户端需要不同的sql_mode时，ProxySQL需要跟踪更改，以确保该特定客户端使用的每个后端连接上所需的sql_mode相同。
    当ProxySQL建立到后端的新连接时，它不知道当前的sql_mode。尽管可以查询后端以检索sql_mode和其他变量，但查询后端会带来延迟成本。
    因此，ProxySQL不会查询后端以了解sql_mode的值，而是假定所有后端连接在默认情况下都具有mysql-default_sql_mode中定义的sql_mode。

    如果客户端将sql_mode更改为不同于mysql-default_sql_mode的值，ProxySQL将确保在该客户端使用的每个连接上更改sql_mode。
    另一方面，如果客户端将sql_mode设置为mysql-default_sql_mode中指定的相同值，则ProxySQL不会更改后端连接上的sql_mode，因为它假定sql_mode已经正确。

    错误配置的mysql-default_sql_mode可能导致意外结果。
    例如，如果mysql-default_sql_mode=''（ProxySQL中的默认值，以及mysql<=5.6.5的默认值）而后端的sql_mode不同于''，则如果客户端执行set session sql_mode=''，ProxySQL将不会更改后端的sql_mode。

    需要将此变量配置为所有后端的默认sql_mode。如果后端具有不同的sql_mode，或者希望ProxySQL始终强制执行客户端指定的sql_mode，则可以使用无效的sql_mode配置mysql-default_sql_mode。
    这将强制ProxySQL始终将后端的sql_mode更改为客户端指定的任何值。

    System Variable	        Name	        mysql-default_sql_mode
                            Dynamic	        Yes
    Permitted Values	    Type	        String
                            Default         ''
                            Valid Values	Any valid or invalid sql_mode

### mysql-default_sql_safe_updates

    版本2.0.11中已弃用。请参阅mysql-default_variables
    如果启用此变量，则在WHERE子句或LIMIT子句中不使用键的UPDATE和DELETE语句将产生错误。
    这使得捕获UPDATE和DELETE语句成为可能，这些语句中的键使用不正确，可能会更改或删除大量行。

    System Variable     	Name	        mysql-default_sql_safe_updates
                            Dynamic	        Yes
    Permitted Values	    Type	        String
                            Default	        OFF
                            Valid Values	ON|OFF

### mysql-default_sql_select_limit

    版本2.0.11中已弃用。请参阅mysql-default_variables

    从SELECT语句返回的最大行数。
    新连接的默认值是服务器允许每个表的最大行数。典型的默认值为（232）−1或（264）−1.如果更改了限制，则可以通过指定默认值来恢复默认值。
    如果SELECT具有LIMIT子句，则LIMIT优先于sql_select_limit的值。

    System Variable	        Name	        mysql-default_sql_select_limit
                            Dynamic	        Yes
    Permitted Values	    Type	        Integer
                            Default	        DEFAULT
                            Valid Values	The default value for a new connection is the maximum number of rows that the server permits per table. Typical default values are (232)−1 or (264)−1. If you have changed the limit, the default value can be restored by assigning a value of DEFAULT.

### mysql-default_time_zone

    版本2.0.11中已弃用。请参阅mysql-default_variables

    如果客户端未指定任何时区，则分配给客户端的时区是当前分配给mysql-default_time_zone的任何时区。
    当客户端需要不同的时区时，ProxySQL需要跟踪更改，以确保特定客户端使用的每个后端连接上所需的时区相同。
    当ProxySQL建立到后端的新连接时，它不知道当前时区。
    尽管可以查询后端以检索时区和其他变量，但查询后端会带来延迟成本。
    因此，ProxySQL不会查询后端以了解时区的值，而是假定所有后端连接在默认情况下都具有mysql-default_time_zone中定义的时区。

    System Variable	        Name	        mysql-default_time_zone
                            Dynamic	        Yes
    Permitted Values	    Type	        String
                            Default	        SYSTEM
                            Valid Values	Any valid or invalid MySQL time_zone

### mysql-default_transaction_read

    版本2.0.11中已弃用。请参阅mysql-default_variables

    ProxySQL跟踪事务访问模式、READ WRITE 或 READ ONLY 子句。

    如果手动设置，则ProxySQL的必填项是SESSION范围定义
    - SET SESSION TRANSACTION READ WRITE
    - SET SESSION TRANSACTION READ ONLY

    不支持SET TRANSACTION READ (WRITE|ONLY) ，它将自动禁用多路复用。

    在MySQL中，默认情况下，事务以 read/write 模式进行，同时允许对事务中使用的表进行读写。
    此模式可以使用访问模式为READ WRITE读写的 SET SESSION TRANSACTION显式指定。


    System Variable	        Name	        mysql-default_transaction_read
                            Dynamic	        Yes
    Permitted Values	    Type	        String
                            Default	        WRITE
                            Valid Values	READ|WRITE

### mysql-default_tx_isolation

    ProxySQL仅支持在会话级别更改事务隔离级别。
    不支持任何运行命令（如SET TRANSACTION ISOLATION LEVEL value）的尝试，它将自动禁用多路复用。
    正确的语法是：SET SESSION TRANSACTION ISOLATION LEVEL value

    System Variable	        Name	        mysql-default_tx_isolation
                            Dynamic	        Yes
    Permitted Values	    Type	        String
                            Default	        READ-COMMITTED
                            Valid Values	READ COMMITTED, REPEATABLE READ, and SERIALIZABLE

### mysql-log_mysql_warnings_enabled

    在ProxySQL v2.1.1中引入。如果启用，所有生成的MySQL警告都将记录到ProxySQL日志中。

    System Variable	        Name	        mysql-log_mysql_warnings_enabled
                            Dynamic	        Yes
    Permitted Values	    Type	        Boolean
                            Default	        false

### mysql-log_unhealthy_connections

    如果客户端以不正常的方式断开连接，并且如果启用（default），ProxySQL将记录一条警告：关闭不健康的客户端连接IP:Port。

    客户端未正常断开连接的最常见原因是客户端仅关闭套接字而不发送任何退出数据包，或者客户端甚至未启动MySQL身份验证而断开连接（操作主要由仅检查端口是否打开并接受TCP连接的监视工具执行)

    System Variable     	Name	        mysql-log_unhealthy_connections
                            Dynamic	        Yes
    Permitted Values	    Type	        Boolean
                            Default	        true

### mysql-multiplexing

    默认情况下启用多路复用。我们建议保持多路复用打开（默认设置）。

    请注意，由于其他原因（https://proxysql.com/documentation/Multiplexing）仍可以禁用多路复用，启用此参数可确保从未启用。

    System Variable	        Name	        mysql-multiplexing
                            Dynamic	        Yes
    Permitted Values	    Type	        Boolean
                            Default	        true

### mysql-enforce_autocommit_on_reads

    System Variable     	Name	        mysql-enforce_autocommit_on_reads
                            Dynamic	        Yes
    Permitted Values	    Type	        Boolean
                            Default     	false

### mysql-eventslog_filename

    如果设置了此变量，ProxySQL将把所有通信记录到指定的文件名中。
    请注意，日志文件不是文本文件，而是具有编码流量的二进制日志。
    此变量的值可以设置为绝对路径名（例如"/data/events_log/events_log"，或者将文件名（例如"events_log"）写入定义的数据目录。
    文件扩展名（例如"events_log.00000001"）中将始终以序号作为后缀。

    System Variable	        Name	        mysql-eventslog_filename
                            Dynamic	        Yes
    Permitted Values	    Type	        String
                            Default	        empty string, not set
                            Valid Values	A filename or absolute path

### mysql-eventslog_filesize

    此变量指定由ProxySQL logger创建的文件的最大大小，如mysql-eventslog_filename中所指定。当达到最大大小时，文件将rotated滚动旋转。

    System Variable	        Name	        mysql-eventslog_filesize
                            Dynamic	        Yes
    Permitted Values	    Type	        Integer (bytes)
                            Default	        104857600 (100MB)
                            Minimum	        1048576
                            Maximum	        1073741824

### mysql-eventslog_default_log

    ProxySQL能够记录通过的查询。
    如果mysql_query_rules中的匹配规则中没有日志定义，则应用mysql-eventslog_default_log。
    另见 https://github.com/sysown/proxysql/wiki/Query-Logging

    System Variable	        Name	        mysql-eventslog_default_log
                            Dynamic	        Yes
    Permitted Values	    Type	        Boolean
                            Default	        false

### mysql-eventslog_format

    从2.0.6版开始，ProxySQL可以处理两种不同的日志格式：
        1：这是默认值：查询以二进制格式记录（如2.0.6之前的版本）
        2：查询以JSON格式记录。
    默认值：1

    另见: https://github.com/sysown/proxysql/wiki/Query-Logging

    System Variable	        Name	        mysql-eventslog_format
                            Dynamic	        Yes
    Permitted Values	    Type	        Integer
                            Default	        1
                            Valid Values	1 : this is the default: queries are logged in binary format (like before 2.0.6)
                                            2 : the queries are logged in JSON format.

### mysql-forward_autocommit

    当mysql-forward_autocommit=false（默认值）时，ProxySQL将跟踪（并记住）客户端需要的autocommit值，并根据需要更改后端连接上的autocommit。
    例如，如果客户机发送set autocommit=0，ProxySQL将只回复OK。当客户端发送DDL时，ProxySQL将获得到目标主机组的连接，并在运行DDL之前更改自动提交。

    如果mysql-forward_autocommit=true，则将SET autocommit=0转发到后端。
    SET autocommit=0不会启动任何事务，连接是在连接池中设置的，查询可能会在不同的连接上执行。
    如果设置mysql-forward_autocommit=true，那么还应该设置mysql-autocommit_false_not_reusable=true，以防止连接返回到连接池。
    换句话说，设置mysql-forward_autocommit=false将防止这种行为，因为自动提交状态是跟踪的。

    System Variable	        Name	    mysql-forward_autocommit
                            Dynamic	    Yes
    Permitted Values	    Type	    Boolean
                            Default	    false

### mysql-free_connections_pct

    ProxySQL使用连接池连接到后端服务器。

    如果没有必要，到后端的连接永远不会预先分配，因此在启动时，到后端的连接将为0。

    当应用程序开始向ProxySQL发送流量时，这会标识它需要向哪个后端发送流量。如果该后端的连接池中存在连接，则使用该连接，否则将创建新连接。

    当连接完成为客户机的请求提供服务时，它将被发送回Hostgroup管理器。如果Hostgroup管理器确定连接可以安全共享，并且连接池未满，则会将其放置在连接池中。
    尽管如此，并非所有未使用的连接都保留在连接池中。

    此变量控制Hostgroup中特定服务器打开的空闲连接占最大连接总数的百分比。

    对于每个hostgroup/backend对，hostgroup管理器将在连接池中保留最多mysql-free_connections_pct * mysql_servers.max_connections / 100 个连接。通过定期ping保持连接打开。

    如果自上一轮ping后未使用连接，则该连接处于空闲状态。空闲连接的两轮ping之间的时间间隔由变量mysql-ping_interval_server_msec控制。

    System Variable	        Name	    mysql-free_connections_pct
                            Dynamic	    Yes
    Permitted Values	    Type	    Integer (percentage)
                            Default 	10
                            Minimum	    0
                            Maximum	    100

### mysql-have_compress

    目前未使用。

### mysql-have_ssl

    ProxySQL v2.0中引入了它，它支持前端SSL（有关更多信息，请参阅SSL支持(https://proxysql.com/documentation/SSL-Support)）。

    System Variable	        Name	    mysql-have_ssl
                            Dynamic	    Yes
    Permitted Values	    Type	    Boolean
                            Default	    false

### mysql-hostgroup_manager_verbose

    在ProxySQL日志中启用hostgroup管理器详细信息的详细日志记录（例如，在运行LOAD MYSQL SERVERS TO RUNTIME时）。

    System Variable	        Name	    mysql-hostgroup_manager_verbose
                            Dynamic	    Yes
    Permitted Values	    Type	    Integer
                            Default	    1
                            Minimum	    0
                            Maximum	    2

### mysql-init_connect

    包含一个或多个SQL语句的字符串，用分号分隔，在创建或初始化时，ProxySQL将为每个后端连接执行这些语句，
    例如设置WAIT_TIMEOUT=28800（工作方式类似于MySQL的init_connect变量）。

    System Variable	        Name	        mysql-init_connect
                            Dynamic	        Yes
    Permitted Values	    Type	        String
                            Default	        empty string, not set
                            Valid Values	String containing one or more SQL statements, separated by semicolons

### mysql-interfaces

    以分号分隔的hostname:port条目传入MySQL流量接口。请注意，对于从同一台计算机上的应用程序进行连接的情况，这也支持UNIX域套接字。
    请注意，在运行时更改此值无效，如果需要更改，则必须重新启动代理。

    更改mysql接口后，不应运行LOAD MYSQL VARIABLES TO RUNTIME，因为无法在running运行时加载此变量。尝试在running运行时加载它们将导致其重置。

    换句话说，在更改mysql-interfaces之后，您需要运行SAVE MYSQL VARIABLES TO DISK，然后重新启动ProxySQL（例如使用PROXYSQL RESTART）。

    System Variable	        Name	        mysql-interfaces
                            Dynamic	        No
    Permitted Values	    Type	        String
                            Default	        0.0.0.0:6033;/tmp/proxysql.sock
                            Valid Values	IP / hostname with ':' seperated port and '';' separated socket filename

### mysql-keep_multiplexing_variables

    定义在查询时不会导致禁用多路复用的变量列表。
    例如，"SELECT @@version"，默认情况下proxysql将禁用多路复用。
    但因为"version"在mysql-keep_multiplexing_variables中，所以不会禁用多路复用。
    该列表是在ProxySQL中定义的，不是动态的。
    默认值：trx_isolation,version

### mysql-max_stmts_cache

    设置使用Prepare语句时可以缓存的语句的最大总数。

    System Variable	        Name	        mysql-max_stmts_cache
                            Dynamic	        Yes
    Permitted Values	    Type	        Integer
                            Default	        10000

### mysql-kill_backend_connection_when_disconnect

    启用后，当客户端断开连接时，客户端连接的后端连接将被终止（在ProxySQL v2.0中引入）。

    System Variable	        Name	        mysql-kill_backend_connection_when_disconnect
                            Dynamic	        Yes
    Permitted Values	    Type	        Boolean
                            Default	        true

### mysql-long_query_time

    将通过代理的查询计数为'slow'的阈值。慢查询的总数可以在stats_mysql_global表中的变量Slow_querys（该表中的每一行代表一个变量）中找到。

    System Variable	        Name	        mysql-long_query_time
                            Dynamic	        Yes
    Permitted Values	    Type	        Integer (milliseconds)
                            Default	        1000
                            Minimum         0
                            Maximum	        1728000000

### mysql-max_allowed_packet

    mysql-max_allowed_packet定义客户端接收的单个数据包/命令的最大大小。它模仿mysqld的max_allowed_数据包的行为

    System Variable     	Name	        mysql-max_allowed_packet
                            Dynamic	        Yes
    Permitted Values	    Type	        Integer (bytes)
                            Default	        4194304 (4MB)
                            Minimum	        8192 (8KB)
                            Maximum	        1073741824 (1GB)

### mysql-max_connections

    代理可以处理的最大客户端连接数。达到此数字后，新连接将被拒绝，并显示#HY000错误和错误消息"Too many connections."。

    System Variable	        Name	        mysql-max_connections
                            Dynamic	        Yes
    Permitted Values	    Type	        Integer
                            Default	        2048
                            Minimum	        1
                            Maximum	        1000000

### mysql-max_stmts_per_connection

    在连接关闭（版本1.4.3之前）或重置（版本1.4.4开始）之前，可以在后端连接上prepared语句数的阈值。
    当连接返回到连接池时，将对此进行计算。

    System Variable	        Name	        mysql-max_stmts_per_connection
                            Dynamic	        Yes
    Permitted Values	    Type	        Integer
                            Default	        20
                            Minimum	        1
                            Maximum	        1024

### mysql-max_transaction_time

    活动事务运行超过此超时的会话将被终止。

    System Variable	        Name	        mysql-max_transaction_time
                            Dynamic	        Yes
    Permitted Values	    Type	        Integer (milliseconds)
                            Default	        14400000 (4 hours)
                            Minimum	        1000
                            Maximum	        1728000000

### mysql-min_num_servers_lantency_awareness

    延迟感知是一种仅用于将流量发送到最近后端的算法。
    IE：如果多个AZ中有slaves从属服务器，ProxySQL将只向同一AZ上的slaves从属服务器发送流量。

    但要触发此算法，需要最少数量的服务器。
    如果3个AZ中有3个slaves从属服务器，并且application/ProxySQL位于一个AZ中，则您可能不希望将几乎所有通信量只发送到一个slaves从属服务器

    System Variable	        Name	        mysql-min_num_servers_lantency_awarenes
                            Dynamic	        Yes
    Permitted Values	    Type	        Integer
                            Default	        1000

### mysql-mirror_max_concurrency

    ToDo

    System Variable	        Name	        mysql-mirror_max_concurrency
                            Dynamic	        Yes
    Permitted Values	    Type	        Integer
                            Default     	16
                            Minimum     	1
                            Maximum	        8192

### mysql-mirror_max_queue_length

    ToDo

    System Variable	        Name	        mysql-mirror_max_queue_length
                            Dynamic	        Yes
    Permitted Values	    Type	        Integer
                            Default	        32000
                            Minimum	        0
                            Maximum	        1048576

### mysql-ping_interval_server_msec

    代理应ping后端连接以使其保持活动状态（即使没有传出流量）的间隔。
    这里的目的是保持一些连接处于活动状态，以减少新查询对不太常用的目标后端服务器的延迟。

    System Variable	        Name	        mysql-ping_interval_server_msec
                            Dynamic	        Yes
    Permitted Values	    Type	        Integer (milliseconds)
                            Default	        10000
                            Minimum	        1000
                            Maximum	        604800000

### mysql-ping_timeout_server

    代理在内部ping它已打开的连接，以使它们保持活动状态。
    这消除了在需要路由查询时打开指向主机组的新连接的成本，同时也增加了代理内部的内存占用和一些额外流量。
    这是允许这些ping成功的超时时间。

    System Variable	        Name	        mysql-ping_timeout_server
                            Dynamic	        Yes
    Permitted Values	    Type	        Integer (milliseconds)
                            Default	        200
                            Minimum	        10
                            Maximum	        600000

### mysql-poll_timeout

    代理用来通过poll()系统调用检测incoming/outgoing 流量的最小超时。
    如果代理由于其内部计算而确定它应该坚持更高的超时，它将使用该超时，但它永远不会使用小于该超时的值。

    System Variable	        Name	        mysql-poll_timeout
                            Dynamic	        Yes
    Permitted Values	    Type	        Integer (milliseconds)
                            Default	        2000
                            Minimum	        10
                            Maximum	        20000

### mysql-poll_timeout_on_failure

    发生连接错误后用于检测incoming/outgoing的超时。在此类事件中，代理会自动将其超时调整为较低的值，以便能够使用有效连接快速响应。

    System Variable         Name	        mysql-poll_timeout_on_failure
                            Dynamic	        Yes
    Permitted Values	    Type	        Integer (milliseconds)
                            Default	        100
                            Minimum	        10
                            Maximum	        20000

### mysql-query_cache_size_MB

    查询缓存使用的内存总量，注意：mysql-query_cache_size_MB的当前实现没有强加硬限制。相反，它被清除线程用作参数。

    System Variable	        Name	        mysql-query_cache_size_MB
                            Dynamic	        Yes
    Permitted Values	    Type	        Integer (MB)
                            Default	        256
                            Minimum	        0
                            Maximum	        10485760

### mysql-query_cache_stores_empty_result

    变量控制是否缓存没有行的resultset（在ProxySQL v2.0中引入）。

    System Variable	        Name	        mysql-query_cache_stores_empty_result
                            Dynamic	        Yes
    Permitted Values	    Type	        Boolean
                            Default	        true

### mysql-query_digests

    当此变量设置为true时，代理将分析通过它的查询，并将它们划分为具有相同参数的不同值的查询类。
    它为这些查询类计算一些metrics，所有这些查询都可以在stats_mysql_query_digest表中找到。
    有关更多详细信息，请参阅管理表文档。（https://proxysql.com/documentation/main-runtime#mysql_query_rules）
    还需要注意的是，查询摘要用于确定何时需要禁用多路复用，例如在临时表, SQL_CALC_FOUND_ROWS , GET_LOCK等情况下。

    不要禁用mysql-query_digest，除非您确实确定它不会破坏您的应用程序。

    System Variable     	Name	        mysql-query_digests
                            Dynamic	        Yes
    Permitted Values	    Type	        Boolean
                            Default	        true

### mysql-query_digests_lowercase

    当此变量设置为true时，查询摘要将自动转换为小写。否则，如果为false，则query digests区分大小写。

    System Variable	        Name	        mysql-query_digests_lowercase
                            Dynamic	        Yes
    Permitted Values	    Type	        Boolean
                            Default	        false

### mysql-query_digests_max_digest_length

    定义stats_mysql_query_digest中报告的digest_text的最大长度

    System Variable	        Name	                        mysql-query_digests_max_digest_length
                            Dynamic	                        Yes
    Permitted Values	    Type	                        Integer
                            Default	                        2048
                            Minimum	                        16
                            Maximum (up to 1.3.1)	        65000
                            Maximum (from 1.3.2 onwards)	1048576

### mysql-query_digests_max_query_length

    定义计算query digest和digest_text时处理的最大查询长度

    System Variable	        Name	                        mysql-query_digests_max_query_length
                            Dynamic	                        Yes
    Permitted Values	    Type	                        Integer
                            Default	                        65000
                            Minimum	                        16
                            Maximum (up to 1.3.1)	        65000
                            Maximum (from 1.3.2 onwards)	16777216

### mysql-query_digests_grouping_limit

    在v2.1.0中引入。定义占位符?在摘要中的最大替换数？。摘要中的元素将替换为占位符？，直到达到元素编号N，之后所有元素将压缩为。。。。
    例如：让mysql-query_digests_grouping_limit=3表示以下摘要：
    SELECT * FROM tablename WHERE id IN (1,2,3,4,5,6,7,8,9,10)

    将压缩为：
    SELECT * FROM tablename WHERE id IN (?,?,?,...)

    System Variable	        Name	                mysql-query_digests_grouping_limit
                            Dynamic	                Yes
    Permitted Values	    Type	                Integer
                            Default	                3
                            Minimum	                1
                            Maximum	                2089

### mysql-query_digests_no_digits

    当激活时，ProxySQL将把查询中的所有数字替换为"?"符号以生成摘要。
    此功能可以通过配置mysql-query_digests_no_digits的值来控制。

    System Variable	        Name	    mysql-query_digests_no_digits
                            Dynamic	    Yes
    Permitted Values	    Type	    Boolean
                            Default	    false

### mysql-query_digests_normalize_digest_text

    当设置为FALSE（默认值）时，ProxySQL将在表stats.stats_mysql_query_digest by schema中缓存SQL摘要和相关信息。
    此变量为TRUE时，查询统计信息将digest_text存储在不同的内部哈希表上。通过这种方式，ProxySQL将能够规范化数据，摘要文本在内部存储在其他位置，并消除重复数据。
    当您查询stats_mysql_query_digest时，数据会合并在一起。
    这大大减少了具有许多模式但查询模式类似的设置上的内存使用。

    System Variable	        Name	    mysql-query_digests_normalize_digest_text
                            Dynamic	    Yes
    Permitted Values	    Type	    Boolean
                            Default	    false

### mysql-query_digests_replace_null

    如果为TRUE，则在使用"?"创建查询摘要时，ProxySQL将替换null。
    此方法将规范化如下语句：

        SQL                                       Digest
        INSERT INTO tablename(id) VALUES (1);     INSERT INTO tablename(id) VALUES (?);
        INSERT INTO tablename(id) VALUES (NULL);  INSERT INTO tablename(id) VALUES (?);
        CALL spa(NULL, null, NULL, null);         CALL spa(?, ?, ?, ?);
        CALL spa(1, null, NULL, 4);               CALL spa(?, ?, ?, ?);
        CALL spa(1, 2, 3, 4);                     CALL spa(?, ?, ?, ?);

    System Variable     	Name	    mysql-query_digests_replace_null
                            Dynamic	    Yes
    Permitted Values	    Type	    Boolean
                            Default	    false

### mysql-query_digests_track_hostname

    如果处于active状态，它会在stats_mysql_query_digest表中报告原始客户端地址
    另见https://github.com/sysown/proxysql/wiki/STATS-(statistics)

    System Variable	        Name	    mysql-query_digests_track_hostname
                            Dynamic	    Yes
    Permitted Values	    Type	    Boolean
                            Default	    false

### mysql-query_processor_iterations

    如果设置了mysql_query_rules.flagOUT，并且mysql-query_processor_iterations大于0，则匹配规则将设置flagIN，并从开始到query_processor_iterations次数开始处理规则。
    因此，mysql-query_processor_iterations允许跳回到以前的mysql_query_rules。

    System Variable     	Name	    mysql-query_processor_iterations
                            Dynamic	    Yes
    Permitted Values	    Type	    Integer
                            Default	    0
                            Minimum	    0
                            Maximum	    1000000

### mysql-query_processor_regex

    此变量定义要使用的正则表达式引擎：
        1:PCRE(http://www.pcre.org/)
        2:RE2(https://github.com/google/re2)

    在v1.4.0之前，只有RE2可用，始终启用无案例，并且始终禁用全局。
    从v1.4.0开始，PCRE和RE2都可用。现在，PCRE和RE2都支持使用re_modifiers的CASELESS无壳和GLOBAL全局。（https://proxysql.com/documentation/main-runtime#mysql_query_rules）

    尽管如此，如果在re_modifiers中同时配置了无大小写和全局，则RE2不会同时支持这两种类型(https://proxysql.com/documentation/main-runtime#mysql_query_rules)。因此，默认的正则表达式引擎更改为PCRE。

    System Variable	        Name	        mysql-query_processor_regex
                            Dynamic	        Yes
    Permitted Values	    Type	        Integer
                            Default	        PCRE	1
                            Valid Values	PCRE	1
                                            RE2	    2

### mysql-query_retries_on_failure

    如果在运行查询时出现故障，可以在出现故障时重试mysql-query_retries_on_failure。
    System Variable	        Name	        mysql-query_retries_on_failure
                            Dynamic     	Yes
    Permitted Values	    Type	        Integer
                            Default	        1
                            Minimum	        0
                            Maximum	        1000

### mysql-reset_connection_algorithm

    当reset_connection_algorithm=2时，MySQL_Thread本身会尝试重置连接，而不是依赖连接purger HGCU_Thread_run()（在ProxySQL v2.0中引入），
    reset_connection_algorithm可以设置为：
        1 = ProxySQL v1.x中使用的旧算法
        2 = 自ProxySQL v2.0以来的新算法（新默认值）

    System Variable	        Name	        mysql-reset_connection_algorithm
                            Dynamic	        Yes
    Permitted Values	    Type	        Integer
                            Default	        2
                            Minimum	        1
                            Maximum	        2

### mysql-server_capabilities

    MySQL功能的位掩码（编码为位），代理将使用它响应连接到它的客户端。
    这对于防止使用某些功能非常有用，尽管计划在将来不推荐使用。
    默认功能包括：
    server_capabilities = CLIENT_FOUND_ROWS | CLIENT_PROTOCOL_41 | CLIENT_IGNORE_SIGPIPE | CLIENT_TRANSACTIONS | CLIENT_SECURE_CONNECTION | CLIENT_CONNECT_WITH_DB | CLIENT_SSL;
    有关服务器功能的更多详细信息，请参阅官方文档。(https://dev.mysql.com/doc/internals/en/capability-flags.html#packet-Protocol::CapabilityFlags)

    System Variable	        Name	        mysql-server_capabilities
                            Dynamic	        Yes
    Permitted Values	    Type	        Integer
                            Default     	47626
                            Minimum	        10
                            Maximum	        65535

### mysql-server_version

    代理将响应客户端的服务器版本。请注意，无论后端服务器的版本如何，代理都将使用以下命令响应

    System Variable         Name	        mysql-server_version
                            Dynamic	        Yes
    Permitted Values	    Type	        String
                            Default	        5.5.30

### mysql-servers_stats

    目前未使用。将在将来的版本中删除。

    System Variable	        Name	        mysql-servers_stats
                            Dynamic	        Yes
    Permitted Values	    Type	        Boolean
                            Default     	true

### mysql-session_debug

    不赞成

    System Variable	        Name	        mysql-session_debug
                            Dynamic	        Yes
    Permitted Values	    Type	        Boolean
                            Default	        true

### mysql-session_idle_ms

    从v1.3.0开始，每个MySQL_Thread都有一个辅助线程，负责处理空闲会话（客户端连接）。
    mysql-session_idle_ms定义会话空闲的时间，并将会话从主线程传递到辅助线程。

    System Variable	        Name	        mysql-session_idle_ms
                            Dynamic	        Yes
    Permitted Values	    Type	        Integer (milliseconds)
                            Default	        1000
                            Minimum	        100
                            Maximum

### mysql-session_idle_show_processlist

    mysql-session_idle_show_processlist定义空闲会话由mysql-session_idle_ms定义）, 是否应列在show processlist中（或通常列在stats_mysql_processlist表中）。
    出于性能原因，默认情况下不列出空闲会话。

    System Variable     	Name	        mysql-session_idle_show_processlist
                            Dynamic	        Yes
    Permitted Values	    Type	        Boolean
                            Default

### mysql-sessions_sort

    会话是MySQL客户端和代理中的后端服务器之间的对话。会话通常以稳定的顺序处理，但在某些情况下（例如使用transaction工作负载，这会使会话绑定到池中的某些MySQL连接），以相同的顺序处理它们会导致饥饿。
    此变量控制是否应按等待时间的顺序处理会话，以便在会话之间更均衡地分配流量。

    System Variable	        Name	        mysql-sessions_sort
                            Dynamic	        Yes
    Permitted Values	    Type	        Boolean
                            Default	        true

### mysql-set_query_lock_on_hostgroup

    当active时，如果在多语句命令中使用SET语句，或者SET语句的解析未成功，则多路复用和查询路由都将禁用。
    客户端将保持绑定到单个后端连接。ProxySQL不理解的任何SET语句都将禁用多路复用和路由。

    System Variable	        Name	        mysql-set_query_lock_on_hostgroup
                            Dynamic	        Yes
    Permitted Values	    Type	        Boolean
                            Default	        true

### mysql-show_processlist_extended

    当处于活动状态时，ProxySQL将以JSON格式显示有关正在运行的进程的扩展信息。
    信息将在stats_mysql_processlist.extended_info中提供

    System Variable     	Name	        mysql-show_processlist_extended/td>
                            Dynamic	        Yes
    Permitted Values	    Type	        Boolean
                            Default	        false

### mysql-shun_on_failures

    在1秒钟的时间间隔内，允许同一服务器发生的连接错误数，直到该服务器被自动暂时回避为止。
    目前，无法通过将其设置为特殊值来禁用此功能，因此如果您想这样做，可以将其增加到非常大的值。

    System Variable	        Name	        mysql-shun_on_failures
                            Dynamic	        Yes
    Permitted Values	    Type	        Integer
                            Default	        5
                            Minimum	        0
                            Maximum	        10000000

### mysql-shun_recovery_time_sec

    已自动回避的后端服务器将至少在这段时间后恢复。ProxySQL将不会重试再次使用此类服务器，直到至少经过指定的时间。

    请注意，只有当服务器开始处理客户端流量时，ProxySQL才会再次将其识别为ONLINE：当服务器联机时，它被认为是绝对健康的—这是连接检查（通过ping）无法单独确定的。
    但是，一旦指定的时间过去，服务器将在开始服务至少一个客户端连接之前自动再次识别为ONLINE。
    自调整：

        * mysql-shun_recovery_time_sec应始终小于mysql-connect_timeout_server_max/1000，以防止服务器被取出太长时间而导致错误返回到客户端。
        如果mysql-shun_recovery_time_sec > mysql-connect_timeout_server_max/1000 ，则使用两者中较小的一个。（见#530）
        * 如果一个主机组中只有一台服务器，并且mysql-shun_recovery_time_sec>1，则服务器将在1秒后自动恢复online

    System Variable	        Name	        mysql-shun_recovery_time_sec
                            Dynamic	        Yes
    Permitted Values	    Type	        Integer (seconds)
                            Default	        10
                            Minimum	        0
                            Maximum	        31536000

### mysql-ssl_p2s_ca

    用于后端连接的SSL CA。

    System Variable	        Name	        mysql-ssl_p2s_ca
                            Dynamic	        Yes
    Permitted Values	    Type	        String
                            Default

### mysql-ssl_p2s_capath

    定义指向包含PEM文件的目录的路径，该文件包含一个x509证书，供证书颁发机构（CA）用于后端连接。

    System Variable	        Name	        mysql-ssl_p2s_capath
                            Dynamic     	Yes
    Permitted Values	    Type	        String
                            Default

### mysql-ssl_p2s_cert

    用于后端连接的SSL证书。

    System Variable	        Name	        mysql-ssl_p2s_cert
                            Dynamic	        Yes
    Permitted Values	    Type	        String
                            Default

### mysql-ssl_p2s_cipher

    用于后端连接的SSL密码（可在此处找到MySQL密码列表）。（https://dev.mysql.com/doc/refman/8.0/en/encrypted-connection-protocols-ciphers.html）

    System Variable	        Name	        mysql-ssl_p2s_cipher
                            Dynamic	        Yes
    Permitted Values	    Type	        String
                            Default

### mysql-ssl_p2s_key

    用于后端连接的SSL Key。

    System Variable     	Name	        mysql-ssl_p2s_key
                            Dynamic	        Yes
    Permitted Values	    Type	        String
                            Default

### mysql-ssl_p2s_crl

    PEM文件的路径，该文件应包含用于后端连接的一个或多个已吊销的X509证书。

    System Variable	        Name	        mysql-ssl_p2s_crl
                            Dynamic     	Yes
    Permitted Values	    Type	        String
                            Default

### mysql-ssl_p2s_crlpath

    定义指向包含PEM文件的目录的路径，该文件包含一个为后端连接吊销的x509证书。

    System Variable	        Name	        mysql-ssl_p2s_crlpath
                            Dynamic     	Yes
    Permitted Values	    Type	        String
                            Default

### mysql-stacksize

    代理用来处理MySQL流量和连接到后端的后台线程使用的堆栈大小。请注意，在运行时更改此值无效，如果需要更改，则必须重新启动代理。

    System Variable     	Name	        mysql-stacksize
                            Dynamic	        Yes
    Permitted Values	    Type	        Integer (bytes)
                            Default	        1048576
                            Minimum	        262144
                            Maximum	        4194304

### mysql-stats_time_backend_query

    启用/禁用后端查询CPU时间统计信息的收集。

    System Variable	        Name	                        mysql-stats_time_backend_query
                            Dynamic	                        Yes
    Permitted Values	    Type	                        Boolean
                            Default (up to 1.4.3)	        true
                            Default (from 1.4.4 onwards)	false

### mysql-stats_time_query_processor

    启用/禁用查询处理器CPU时间统计信息的收集。

    System Variable	        Name	                        mysql-stats_time_query_processor
                            Dynamic	                        Yes
    Permitted Values	    Type	                        Boolean
                            Default (up to 1.4.3)	        true
                            Default (from 1.4.4 onwards)	false

### mysql-tcp_keepalive_time

    当mysql-use_tcp_keepalive处于活动状态时，在连接空闲tcp_keepalive_time秒后，ProxySQL将开始向目标发送keepalive

    System Variable	        Name	    mysql-tcp_keepalive_time
                            Dynamic	    Yes
    Permitted Values	    Type	    Integer (seconds)
                            Default	    0

### mysql-use_tcp_keepalive

    当处于活动状态时，ProxySQL将在客户端打开会话期间发送KeepAlive信号。

    System Variable	        Name	    mysql-use_tcp_keepalive
                            Dynamic	    Yes
    Permitted Values	    Type	    Boolean
                            Default	    false

### mysql-threads

    ProxySQL用于处理MySQL流量的后台线程数。请注意，在这些线程之上还有其他"administrative"线程，例如：

    管理接口线程

    与后端服务器交互的监控模块线程（一个用于监控连接，一个用于ping服务器，一个用于监控复制延迟）

    偶尔创建临时线程，以终止长时间运行的无响应查询

    libmariadbclient库用于与MySQL服务器进行某些异步交互的后台线程

    请注意，在运行时更改此值无效，如果需要更改，则必须重新启动代理。

    更改mysql-threads后，不应运行 LOAD MYSQL VARIABLES TO RUNTIME，因为无法在运行时加载此变量。尝试在运行时加载它们将导致其重置。

    换句话说，在更改mysql-threads之后，您需要运行SAVE MYSQL VARIABLES TO DISK ，然后重新启动ProxySQL（例如使用ProxySQL RESTART）。

    System Variable	        Name	    mysql-threads
                            Dynamic	    No
    Permitted Values	    Type	    Integer
                            Default	    4
                            Minimum	    1
                            Maximum	    255

### mysql-threshold_query_length

    将后台MySQL连接标记为不可重用的代理的传入SQL查询的最大大小。这将强制代理打开到后端服务器的新连接，以确保服务器的内存占用保持在合理的限制内。

    更多详情请点击此处：https://dev.mysql.com/doc/refman/5.6/en/memory-use.html

    mysqld文档中的相关引用："连接缓冲区和结果缓冲区的大小都以等于net_buffer_length字节开始，但根据需要动态放大到max_allowed_packet字节。
    结果缓冲区在每个SQL语句后收缩为net_buffer_length字节。"

    System Variable	        Name	    mysql-threshold_query_length
                            Dynamic 	Yes
    Permitted Values	    Type	    Integer (bytes)
                            Default	    524288
                            Minimum	    1024
                            Maximum	    1073741824

### mysql-threshold_resultset_size

    如果后端服务器返回的结果集大于此值，则ProxySQL将开始向请求结果的MySQL客户端发送结果，以限制其内存占用。

    System Variable	        Name	    mysql-threshold_resultset_size
                            Dynamic	    Yes
    Permitted Values	    Type	    Integer (bytes)
                            Default	    4194304 (4MB)
                            Minimum	    1024
                            Maximum	    1073741824

### mysql-throttle_connections_per_sec_to_hostgroup

    ToDo

### mysql-throttle_max_bytes_per_second_to_client

    ToDo

### mysql-throttle_ratio_server_to_client

    ToDo

### mysql-verbose_query_error

    当为active时，ProxySQL将在出现错误时打印其他信息，如：user, schema, digest_text, address, port

    System Variable	    Name	    mysql-verbose_query_error
                        Dynamic	    Yes
    Permitted Values	Type	    Boolean
                        Default	    false

### mysql-wait_timeout

    如果proxy代理会话（MySQL客户端和ProxySQL之间的会话）空闲时间超过此阈值，代理将终止会话。

    System Variable	    Name	    mysql-wait_timeout
                        Dynamic	    Yes
    Permitted Values	Type	    Integer (milliseconds)
                        Default	    28800000 (8 hours)
                        Minimum	    0
                        Maximum	    1728000000



